<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8">
  <title></title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.4/font/bootstrap-icons.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="homepage/homepage.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/autosize.js/4.0.2/autosize.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>

  <!--Plugin JavaScript file-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js"></script>
  <script src="homepage/homepage.js"></script>
  <script src="notification.js"></script>
  <script>
    $( function() {
      $(".js-range-slider").ionRangeSlider();
    } );
  </script>

  <script>
    $(document).ready(function() {
      fetch('/getNotifications', {
        method: 'POST'
      });
    });

    function searchCategory(event, categoryName) {
      event.preventDefault();
      var url = "http://localhost:8080/search?category=" + encodeURIComponent(categoryName);
      window.location.href = url;
    }
    function searchStore(event, storeName) {
      event.preventDefault();
      var url = "http://localhost:8080/search?storeName=" + encodeURIComponent(storeName);
      window.location.href = url;
    }
  </script>
</head>
<body>
<div th:replace="~{NavigationBar :: navigationBar}"></div>
<div th:replace="~{NavigationBar :: navigationBarModal}"></div>
<!-- Categories-->
<div class="card">
  <div class="row">
    <!-- Sidebar -->
    <div class="col-md-3">
      <div class="card" style=
              "font-family: cursive;">
        <div class="card-header p-3">
          <i class="bi bi-list"></i> Categories
        </div>
        <div class = "overflow-auto custom-scrollbar-css" style="height: 340px;">
          <ul class="list-group list-group-flush">
            <li th:each="category : ${T(Domain.Store.Category).values()}"
                class="list-group-item list-group-item-action list-group-item-light p-3"
                th:text="${category.getDisplayName()}"
                th:attr="onclick=|searchCategory(event, '${category.name()}')|"></li>
          </ul>
        </div>
      </div>
    </div>
    <!-- Stores-->

        <!-- Sidebar -->
        <div class="col-md-3">
          <div class="card" style=
                  "font-family: cursive;">
            <div class="card-header p-3">
              <i class="bi bi-list"></i> Stores
            </div>
            <div class = "overflow-auto custom-scrollbar-css" style="height: 340px;">
              <ul class="list-group list-group-flush">
                <li th:each="store : ${stores}"
                    class="list-group-item list-group-item-action list-group-item-light p-3"
                    th:text="${store.storeName()}"
                    th:attr="onclick=|searchStore(event, '${store.storeName()}')|"></li>
              </ul>
            </div>
          </div>
        </div>
        <!-- Stores-->

    <!-- Image -->
    <div class="col-md-6">
      <div id="carouselExample" class="carousel slide">
        <div class="carousel-inner">
          <div class="carousel-item active" style="height: 400px;">
            <img src="https://www.shannonspringshotel.com/wp-content/uploads/2020/06/shopping-shannon-springs-2.jpg" class="d-block w-100"  style="height: 400px;" alt="...">
            <div class="carousel-caption d-none d-md-block">
              <h5>Brand new product</h5>
              <button type="button" class="btn btn-outline-dark mt-auto"><h5> information </h5></button>
            </div>
          </div>
          <div class="carousel-item"  style="height: 400px;">
            <img src="https://images.unsplash.com/photo-1560343090-f0409e92791a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Nnx8cHJvZHVjdHxlbnwwfHwwfHw%3D&auto=format&fit=crop&w=500&q=60" class="d-block w-100"  style="height: 400px;" alt="...">
            <div class="carousel-caption d-none d-md-block">
              <h5>Brand new product</h5>
              <button type="button" class="btn btn-outline-dark mt-auto"><h5> information </h5></button>
            </div>
          </div>
          <div class="carousel-item"  style="height: 400px;">
            <img src="https://cdn.shopify.com/s/files/1/2303/2711/files/2_e822dae0-14df-4cb8-b145-ea4dc0966b34.jpg?v=1617059123" class="d-block w-100"  style="height: 400px;" alt="...">
            <div class="carousel-caption d-none d-md-block">
              <h5>Brand new product</h5>
              <button type="button" class="btn btn-outline-dark mt-auto"><h5> information </h5></button>
            </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </div>
  <!-- Image -->
</div>

<!-- Products-->
<section class="py-5">
  <h1 class = "text-center" id = "recommended">Recommended</h1>
  <div class="container px-4 px-lg-5 mt-5">
    <div class="row gx-4 gx-lg-5 row-cols-2 row-cols-md-3 row-cols-xl-4 justify-content-center">
      <div th:each="product : ${recommendedProducts}" class="col mb-5">
        <div class="card h-100">
          <!-- Product image-->
          <img class="card-img-top" src="https://dummyimage.com/450x300/dee2e6/6c757d.jpg" alt="..." />
          <!-- Product details-->
          <div class="card-body p-4">
            <div class="text-center">
              <!-- Product name-->
              <h5 class="fw-bolder" th:text="${product.productName}">Product name</h5>
              <!-- Product reviews-->
              <div class="d-flex justify-content-center small text-warning mb-2">
                <div th:each="i : ${#numbers.sequence(1, 5)}">
                  <div th:class="${product.productRating >= i ? 'bi-star-fill' : 'bi-star'}"></div>
                </div>
              </div>
              <!-- Product price-->
              <p th:text="'$'+${product.productPrice}"/>
            </div>
          </div>
          <!-- Product actions-->
          <div class="card-footer p-4 pt-0 border-top-0 bg-transparent">
            <div class="text-center">
              <a class="btn btn-outline-dark mt-auto"
                 th:href="@{/product(storeId=${product.storeId}, productId=${product.productId})}">
                View product
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- Products-->

<script th:inline="javascript">
  document.addEventListener("DOMContentLoaded", function() {
    var successMessage = [[${successMessage}]];
    if (successMessage) {
      alert(successMessage);
    }
  });
</script>

</body>
</html>
